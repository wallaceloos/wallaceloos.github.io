<!DOCTYPE html> <html lang="en"> <head> <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"> <meta charset="utf-8"> <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <title>Lane Detection | Wallace S. Loos, PhD</title> <meta name="author" content="Wallace S. Loos, PhD"> <meta name="description" content="Autonomous vehicles"> <meta name="keywords" content="jekyll, jekyll-theme, academic-website, portfolio-website"> <link rel="stylesheet" href="/assets/css/bootstrap.min.css?a4b3f509e79c54a512b890d73235ef04"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/css/mdb.min.css" integrity="sha256-jpjYvU3G3N6nrrBwXJoVEYI/0zw8htfFnhT9ljN3JJw=" crossorigin="anonymous"> <link defer rel="stylesheet" href="https://unpkg.com/bootstrap-table@1.22.1/dist/bootstrap-table.min.css"> <link rel="stylesheet" href="/assets/css/academicons.min.css?f0b7046b84e425c55f3463ac249818f5"> <link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:100,300,400,500,700|Material+Icons"> <link rel="stylesheet" href="/assets/css/jekyll-pygments-themes-github.css?19f3075a2d19613090fe9e16b564e1fe" media="" id="highlight_theme_light"> <link rel="shortcut icon" href="data:image/svg+xml,&lt;svg%20xmlns=%22http://www.w3.org/2000/svg%22%20viewBox=%220%200%20100%20100%22&gt;&lt;text%20y=%22.9em%22%20font-size=%2290%22&gt;%E2%9A%9B%EF%B8%8F&lt;/text&gt;&lt;/svg&gt;"> <link rel="stylesheet" href="/assets/css/main.css?d41d8cd98f00b204e9800998ecf8427e"> <link rel="canonical" href="https://wallaceloos.github.io/projects/lane_project/"> <link rel="stylesheet" href="/assets/css/jekyll-pygments-themes-native.css?e74e74bf055e5729d44a7d031a5ca6a5" media="none" id="highlight_theme_dark"> <script src="/assets/js/theme.js?96d6b3e1c3604aca8b6134c7afdd5db6"></script> <script src="/assets/js/dark_mode.js?9b17307bb950ffa2e34be0227f53558f"></script> </head> <body class="fixed-top-nav "> <header> <nav id="navbar" class="navbar navbar-light navbar-expand-sm fixed-top"> <div class="container"> <a class="navbar-brand title font-weight-lighter" href="/"><span class="font-weight-bold">Wallace </span>S. Loos, PhD</a> <button class="navbar-toggler collapsed ml-auto" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation"> <span class="sr-only">Toggle navigation</span> <span class="icon-bar top-bar"></span> <span class="icon-bar middle-bar"></span> <span class="icon-bar bottom-bar"></span> </button> <div class="collapse navbar-collapse text-right" id="navbarNav"> <ul class="navbar-nav ml-auto flex-nowrap"> <li class="nav-item "> <a class="nav-link" href="/">about</a> </li> <li class="nav-item "> <a class="nav-link" href="/blog/">blog</a> </li> <li class="nav-item "> <a class="nav-link" href="/publications/">publications</a> </li> <li class="nav-item "> <a class="nav-link" href="/projects/">projects</a> </li> <li class="nav-item "> <a class="nav-link" href="/repositories/">repositories</a> </li> <li class="toggle-container"> <button id="light-toggle" title="Change theme"> <i class="fas fa-moon"></i> <i class="fas fa-sun"></i> </button> </li> </ul> </div> </div> </nav> <progress id="progress" value="0"> <div class="progress-container"> <span class="progress-bar"></span> </div> </progress> </header> <div class="container mt-5"> <div class="post"> <header class="post-header"> <h1 class="post-title">Lane Detection</h1> <p class="post-description">Autonomous vehicles</p> </header> <article> <p><a href="https://github.com/wallaceloos/Computer_Vision/blob/master/codes/lane_detection.py" rel="external nofollow noopener" target="_blank">[code]</a></p> <p align="justify"> Lane detection plays an important role in autonomous vehicles, because it ensures safe driving practices. After recording a video from the jetbot’s camera, I have decided to apply a lane detection algorithm to it. It is a simple algorithm that can be divided into 4 parts: 1) camera calibration, 2) edge detection, 3) perspective correction, and 4) line estimation. However, it is important to remember that there are many modern lane detection methods in the literature, and this algorithm is very simple and probably will not perform well for complex environments. This implementation was inspired by this repository: https://github.com/maunesh/advanced-lane-detection-for-self-driving-cars and the book, Hands-On Vision and Behavior for Self-Driving Cars, by Luca Venturi and Krishtof Korda. A summary of the algorithm is presented below. </p> <div class="row"> <div class="col-sm mt-3 mt-md-0"> <p align="center"> <img src="/assets/gifs/lane_detection.gif" width="80%" height="80%"> </p> </div> </div> <h4 id="camera-calibration">Camera Calibration</h4> <p align="justify"> Due to the barrel distortion introduced by the jetbot’s camera lens, the first step required is to correct the image distortion caused by it. In order to perform this correction, we can use the extrinsic and intrinsic camera parameters. These parameters are extracted using a camera calibration algorithm. The extrinsic parameter consists of the location of the camera in the 3D world, and the intrinsic parameters are the optical center and focal length of the camera. After the calibration we use the radial distortion coefficients of the lens to correct the image. The calibration camera used in this example was the chessboard pattern with the Scaramuzza et. al calibration algorithm.</p> <div class="row"> <div class="col-sm mt-3 mt-md-0"> <p align="center"> <img src="/assets/img/fig1_lane_detection.png" width="80%" height="80%"> </p> </div> </div> <h4 id="edge-detection">Edge Detection</h4> <p align="justify"> The next step to detect the lanes is to segment the edges on the road. This segmentation was made on a different color space, HSL (for hue, saturation, lightness), and then, we use the Sobel edge detector over the saturation channel and select the edges above a threshold x.</p> <p align="center"> <img src="/assets/img/fig2_lane_detection.png" width="80%" height="80%"> </p> <h4 id="perspective-correction">Perspective Correction</h4> <p align="justify"> The perspective projection makes straight lines look curved, and then the real distance of the objects cannot easily be interpreted, and it is also difficult to identify curving lanes. To correct this perspective effect, we can perform an orthogonal top-down projection aka bird’s-eye view.</p> <p align="center"> <img src="/assets/img/fig3_lane_detection.png" width="80%" height="80%"> </p> <h4 id="line-estimation">Line Estimation</h4> <p align="justify"> The line estimation is performed by 1) computing the histogram of the sum of the pixels over the columns of the image, 2) and then sliding a window through the edges to record the pixels that will be used to estimate a line. The estimated lines are brought back to the native space.</p> <p align="center"> <img src="/assets/img/fig4_lane_detection.png" width="80%" height="80%"> </p> <p>The same algorithm can be applied on different images as well. However, it is necessary to adjust the perspective step.</p> <p align="center"> <img src="/assets/gifs/lane_road_detection.gif" width="80%" height="80%"> </p> </article> </div> </div> <footer class="fixed-bottom"> <div class="container mt-0"> © Copyright 2023 Wallace S. Loos, PhD. Powered by <a href="https://jekyllrb.com/" target="_blank" rel="external nofollow noopener">Jekyll</a> with <a href="https://github.com/alshedivat/al-folio" rel="external nofollow noopener" target="_blank">al-folio</a> theme. Hosted by <a href="https://pages.github.com/" target="_blank" rel="external nofollow noopener">GitHub Pages</a>. Photos from <a href="https://unsplash.com" target="_blank" rel="external nofollow noopener">Unsplash</a>. </div> </footer> <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script> <script src="/assets/js/bootstrap.bundle.min.js"></script> <script src="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/js/mdb.min.js" integrity="sha256-NdbiivsvWt7VYCt6hYNT3h/th9vSTL4EDWeGs5SN3DA=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/masonry-layout@4.2.2/dist/masonry.pkgd.min.js" integrity="sha256-Nn1q/fx0H7SNLZMQ5Hw5JLaTRZp0yILA/FRexe19VdI=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/imagesloaded@4/imagesloaded.pkgd.min.js"></script> <script defer src="/assets/js/masonry.js" type="text/javascript"></script> <script defer src="https://cdn.jsdelivr.net/npm/medium-zoom@1.0.8/dist/medium-zoom.min.js" integrity="sha256-7PhEpEWEW0XXQ0k6kQrPKwuoIomz8R8IYyuU1Qew4P8=" crossorigin="anonymous"></script> <script defer src="/assets/js/zoom.js?7b30caa5023af4af8408a472dc4e1ebb"></script> <script defer src="https://unpkg.com/bootstrap-table@1.22.1/dist/bootstrap-table.min.js"></script> <script src="/assets/js/no_defer.js?d633890033921b33e0ceb13d22340a9c"></script> <script defer src="/assets/js/common.js?acdb9690d7641b2f8d40529018c71a01"></script> <script defer src="/assets/js/copy_code.js?c9d9dd48933de3831b3ee5ec9c209cac" type="text/javascript"></script> <script async src="https://d1bxh8uas1mnw7.cloudfront.net/assets/embed.js"></script> <script async src="https://badge.dimensions.ai/badge.js"></script> <script type="text/javascript">window.MathJax={tex:{tags:"ams"}};</script> <script defer type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3.2.0/es5/tex-mml-chtml.js"></script> <script defer src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script> <script type="text/javascript">function progressBarSetup(){"max"in document.createElement("progress")?(initializeProgressElement(),$(document).on("scroll",function(){progressBar.attr({value:getCurrentScrollPosition()})}),$(window).on("resize",initializeProgressElement)):(resizeProgressBar(),$(document).on("scroll",resizeProgressBar),$(window).on("resize",resizeProgressBar))}function getCurrentScrollPosition(){return $(window).scrollTop()}function initializeProgressElement(){let e=$("#navbar").outerHeight(!0);$("body").css({"padding-top":e}),$("progress-container").css({"padding-top":e}),progressBar.css({top:e}),progressBar.attr({max:getDistanceToScroll(),value:getCurrentScrollPosition()})}function getDistanceToScroll(){return $(document).height()-$(window).height()}function resizeProgressBar(){progressBar.css({width:getWidthPercentage()+"%"})}function getWidthPercentage(){return getCurrentScrollPosition()/getDistanceToScroll()*100}const progressBar=$("#progress");window.onload=function(){setTimeout(progressBarSetup,50)};</script> </body> </html>